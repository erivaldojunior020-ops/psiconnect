<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consultas do PsicÃ³logo</title>

<style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #07f0d1, #077f8f);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      text-align: center;
      padding: 20px 0;
    }

    header h1 {
      margin: 0;
      font-size: 2.8em;
      color: #fff;
    }

    .menu {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .menu button {
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }

    .menu button:hover {
      background-color: rgba(255, 255, 255, 0.4);
      transform: scale(1.05);
    }

    main {
      flex: 1;
      padding: 30px;
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .consultas {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }

    .card {
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.25);
      display: flex;
      flex-direction: column;
      gap: 12px;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 25px rgba(0,0,0,0.35);
    }

    .status {
      font-weight: bold;
      padding: 4px 10px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.9em;
    }

    .pendente { background-color: #f5c518; color: #000; }
    .confirmado { background-color: #4caf50; color: #fff; }
    .cancelado { background-color: #f44336; color: #fff; }

    .acoes a {
      display: inline-block;
      margin-right: 10px;
      padding: 6px 12px;
      background: rgba(255,255,255,0.3);
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-size: 0.9em;
      transition: 0.2s;
    }

    .acoes a:hover {
      background: rgba(255,255,255,0.6);
      transform: scale(1.05);
    }
</style>
</head>

<body>

<header>
  <h1>Consultas</h1>
  <div class="menu">

    <a href="{% url 'inicio_psicologo' %}">
      <button>Dashboard</button>
    </a>

    <a href="{% url 'consultas_psicologo' %}">
      <button>Consultas</button>
    </a>

    <a href="{% url 'perfil_psicologo' %}">
      <button>Perfil</button>
    </a>

    <a href="{% url 'login_psicologo' %}">
      <button>Sair</button>
    </a>

  </div>
</header>

<main>

  <div class="consultas">

    {% for consulta in consultas %}
    <div class="card">
      <h3>{{ consulta.paciente.email }}</h3>

      <p>Data: {{ consulta.data|date:"d/m/Y" }}</p>
      <p>HorÃ¡rio: {{ consulta.hora|time:"H:i" }}</p>

      <p>Status:
        <span class="status 
          {% if consulta.status == 'confirmado' %}confirmado
          {% elif consulta.status == 'cancelado' %}cancelado
          {% else %}pendente{% endif %}
        ">
          {{ consulta.get_status_display }}
        </span>
      </p>

      {% if consulta.observacoes %}
      <p>Obs: {{ consulta.observacoes }}</p>
      {% endif %}

      <div class="acoes">
        {% if consulta.status == "confirmado" %}
          <a href="{% url 'chat' consulta.id %}">ðŸ’¬ Ir para o Chat</a>
        {% endif %}

        {% if consulta.status != 'confirmado' %}
        <a href="{% url 'confirmar_consulta' consulta.id %}">âœ” Confirmar</a>
        {% endif %}

        {% if consulta.status != 'cancelado' %}
        <a href="{% url 'cancelar_consulta' consulta.id %}">âœ– Cancelar</a>
        {% endif %}

        {% if consulta.status != 'pendente' %}
        <a href="{% url 'pendente_consulta' consulta.id %}">âŸ³ Pendente</a>
        {% endif %}
      </div>

    </div>
    {% empty %}
    <p>ðŸ’¬ Nenhuma consulta encontrada.</p>
    {% endfor %}

  </div>

</main>

</body>
</html>
